{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static%}
{% block titulo %}
   Feature Selection
{% endblock titulo %}

{% block css %}
<link href="{% static 'admin/css/vendor/select2/select2.css' %}" type="text/css" media="screen" rel="stylesheet">
<link href="{% static 'admin/css/autocomplete.css' %}" type="text/css" media="screen" rel="stylesheet">
{% endblock css %}

{% block body %}

<section id="#">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2> {{title}} </h2>
          <hr class="my-4">
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            {{form.topk | as_crispy_field}}
            {{form.k | as_crispy_field}}
            {{form.label | as_crispy_field}}
            {{form.group | as_crispy_field}}
            <p>
              <p> Select dataset to analyze </p>

            <select class="chosen" style="width:350px;" name="publicDataset"> 
              {% for value,key in form.publicDataset.field.choices %}
                  <option name="publicDataset" value="{{value}}">{{key}}</option>
              {%endfor%}
            </select>
          </p>
            <p> Select geneset to analyze </p>
            <p>
            <select class="chosen" style="width:350px;" name="publicGeneset" multiple> 
              {% for value,key in form.publicGeneset.field.choices %}
                  <option name="publicGeneset" value="{{value}}">{{key}}</option>
              {%endfor%}
            </select>
            </p>


            <p>
              <div id="filter_pair" name = "filter_pair"  class="form-check form-switch">
                <input class="form-check-input" type="checkbox" name = "filter_pair" id="filter_pair_checkbox" value=True>
                <label class="form-check-label" for="filter_pair_checkbox">Filter gene/microRNA pairs</label>
              </div>
            </p>
            <div id="filterpairs"  style="display:none">
              {{form.low_coef | as_crispy_field}}
              {{form.min_db| as_crispy_field}}
            </div>


            <p>
              <div id="filter_sample" name = "filter_sample"  class="form-check form-switch">
                <input class="form-check-input" type="checkbox" name = "filter_sample" id="filter_sample_checkbox" value=True>
                <label class="form-check-label" for="filter_sample_checkbox">Filter samples to get features</label>
              </div>
            </p>
            <div id="filtersample"  style="display:none">
              {{form.group_sample | as_crispy_field}}
              {{form.filter_group| as_crispy_field}}
            </div>

            <button type="submit" class="btn btn-primary btn-block">Run Analysis</button>
          </form>

        </div>
      </div>
    </div>
  </section>
 
{% endblock body %}


{% block js %}
<script src="{% static 'admin/js/vendor/select2/select2.full.js'%}"></script>
<script src="{% static 'admin/js/jquery.init.js' %}"></script>
<script src="{% static 'admin/js/autocomplete.js' %}"></script>


<script type="text/javascript">
  var checkboxfilter = document.getElementById("filter_sample_checkbox");
  var checkboxpair = document.getElementById("filter_pair_checkbox");

  
  checkboxfilter.addEventListener('change', function() {
    if (this.checked) {
      console.log("Checkbox is checked..");
      document.getElementById("filtersample").style = "display:true";

    } else {
      console.log("Checkbox is not checked..");
      document.getElementById("filtersample").style = "display:none";
    }
  });

  checkboxpair.addEventListener('change', function() {
    if (this.checked) {
      console.log("Checkbox is checked..");
      document.getElementById("filterpairs").style = "display:true";

    } else {
      console.log("Checkbox is not checked..");
      document.getElementById("filterpairs").style = "display:none";
    }
  });
</script>

{% endblock js %}
